<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org" data-bs-theme="light">
<head th:replace="~{layouts/base::head}">
    <meta charset="UTF-8">
</head>
<body class="mb-5">
    <header th:replace="~{layouts/base::header}"></header>
    <main>
        <div class="container mb-5 pt-4">
            <div class="row">
                <div class="col-12">
                    <a th:href="@{/grupos/{id}(id=${grupo.id})}"><svg xmlns="http://www.w3.org/2000/svg"
                            fill="currentColor" class="icon i-chevl" viewBox="0 0 16 16">
                            <path
                                d="M11.354 1.646a.5.5 0 0 1 0 .708L5.707 8l5.647 5.646a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 0 1 .708 0" />
                        </svg>Volver al grupo</a>
                </div>
                <!-- Título de la página -->
                <div class="col-12 mt-5 mb-5">
                    <h1 th:text="${grupo.nombre} + ': editar grupo'" class="mb-4">Grupo</h1>
                </div>
                <div class="col-md-5">
                    <!-- Miembros actuales -->
                    <h4 class="mb-3">Usuarios actuales</h4>
                    <table class="w-100">
                        <tbody>
                            <tr th:each="participante : ${grupo.miembros}">
                                <td><span th:text="${participante.nombre}">Usuario</span><small
                                        th:if="${participante.id == grupo.admin.id}">(admin)</small></td>
                                        
                            </tr>
                            <tr th:if="${#lists.isEmpty(grupo.miembros)}" style="height: 100px">
                                <td class="text-center" style="line-height: 2">¡Vaya! Este grupo no tiene participantes.
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
                <div class="col-md-1"></div>
                <div class="col-md-4">
                    <!-- Añadir miembro -->
                    <h4 class="mb-3">Añade un participante</h4>
                    <form th:action="@{'/grupos/' + ${grupo.id} + '/add-user'}" method="post" class="form">
                        <div class="form-group">
                            <label for="usuarioEmail">Correo electrónico del usuario</label>
                            <input type="text" class="form-control mt-2" id="usuarioEmail" name="usuarioEmail"
                                placeholder="correo@dominio.es" required>
                        </div>
                        <div class="form-group">
                            <button type="submit" class="btn btn-black">Añadir</button>
                        </div>
                    </form>
                </div>
                <div class="col-md-5">
                    <!-- Eliminar miembro -->
                    <h4 class="mb-3">Elimina un participante</h4>
                    <form th:action="@{'/grupos/' + ${grupo.id} + '/remove-user'}" method="post" class="form">
                        <div class="form-group">
                            <label for="usuarioEmail">Correo electrónico del usuario</label>
                            <input type="text" class="form-control mt-2" id="usuarioEmail" name="usuarioEmail"
                                placeholder="correo@dominio.es" required>
                        </div>
                        <div class="form-group">
                            <button type="submit" class="btn btn-black">Eliminar</button>
                        </div>
                    </form>
                </div>
            </div>
        </div>
    </main>
    <div th:unless="${#lists.isEmpty(toasts)}" th:replace="~{layouts/base::toasts}"></div>

    <script th:unless="${#lists.isEmpty(toasts)}" th:replace="~{layouts/base::toasts-js}"></script>

    <script th:inline="javascript">
        document.addEventListener('DOMContentLoaded', () => {
            const nombreGrupo = [[${ grupo.nombre }]];
            document.getElementsByTagName("title").item(0).innerHTML = "Editar - " + nombreGrupo + " - split.it";
        });
    </script>
    <script src="https://code.jquery.com/jquery-3.3.1.slim.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.14.7/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"
        integrity="sha384-YvpcrYf0tY3lHB60NNkmXc5s9fDVZLESaAA55NDzOxhy9GkcIdslK1eN7N6jIeHz"
        crossorigin="anonymous"></script>
</body>

</html>